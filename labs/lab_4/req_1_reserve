
-- ex14

CREATE OR REPLACE FUNCTION lab_4_ex_14
(
	obj_id integer,
	rate double precision,
	term integer,
	initial_fee bigint
)
RETURNS double precision
AS $$
select ((cost-"initial_fee")*(1+"rate"/100)/term)
FROM objects
WHERE id = "obj_id"
$$
LANGUAGE SQL;

SELECT * FROM lab_4_ex_14(1,13,24,10000000)

--ex15

CREATE OR REPLACE FUNCTION lab_4_ex_15
(
	obj_id integer,
	rate double precision,
	part double precision
)
RETURNS double precision

AS $$
SELECT (cost)*(part/100)*(rate/100) 
FROM objects
WHERE "obj_id" = id
$$
LANGUAGE SQL;

SELECT * FROM lab_4_ex_15(1,13,100)
